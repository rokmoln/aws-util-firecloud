{"version":3,"sources":["../src/cloudwatch.js"],"names":[],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;;;AAEO,IAAI;AAAA,sCAAiB,WAAe;AACzC,iBAAa,IAAI,iBAAI,UAAR,EAD4B;AAEzC,eAAW,SAF8B;AAGzC,YAAQ,SAHiC;AAIzC,cAAU;AAJ+B,MAKvC,EALwB,EAKpB;AACN,QAAI;AACF,eAAS,UADP;AAEF;AAFE,QAGA,MAAM,WAAW,WAAX,CAAuB,EAAC,WAAW,KAAZ,EAAvB,EAA2C,OAA3C,EAHV;;AAMA,QAAI,0BAAE,UAAF,CAAa,QAAb,CAAJ,EAA4B;AAC1B;AACA,YAAM,SAAS,UAAT,CAAN;AACD,KAHD,MAGO;AACL,gBAAU,QAAQ,MAAR,CAAe,UAAf,CAAV;AACD;;AAED,QAAI,CAAC,SAAL,EAAgB;AACd,aAAO,0BAAE,UAAF,CAAa,QAAb,IAAyB,SAAzB,GAAqC,OAA5C;AACD;;AAED,WAAO,QAAQ,cAAR,CAAuB,EAAC,OAAO,SAAR,EAAmB,OAAnB,EAAvB,CAAP;AACD,GAxBU;;AAAA;AAAA;AAAA;AAAA,IAAJ;;kBA0BQ,O","file":"cloudwatch.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport aws from 'aws-sdk';\n\nexport let listAllMetrics = async function({\n  cloudwatch = new aws.CloudWatch(),\n  iteratee = undefined,\n  Token = undefined,\n  Metrics = []\n} = {}) {\n  let {\n    Metrics: newMetrics,\n    NextToken\n  } = await cloudwatch.listMetrics({NextToken: Token}).promise();\n\n\n  if (_.isFunction(iteratee)) {\n    // eslint-disable-next-line callback-return\n    await iteratee(newMetrics);\n  } else {\n    Metrics = Metrics.concat(newMetrics);\n  }\n\n  if (!NextToken) {\n    return _.isFunction(iteratee) ? undefined : Metrics;\n  }\n\n  return exports.listAllMetrics({Token: NextToken, Metrics});\n};\n\nexport default exports;\n"]}