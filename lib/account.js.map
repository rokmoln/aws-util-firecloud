{"version":3,"sources":["../src/account.js"],"names":[],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;AAEO,IAAI,oBAAM,UAAS,EAAC,GAAD,EAAT,EAAgB;AAC/B,MAAI,mBAAmB,0BAAE,MAAF,CAAS,0BAAE,IAAF,CAAO,IAAI,CAAX,CAAT,EAAwB,UAAS,OAAT,EAAkB;AAC/D,WAAO,oBAAmB,IAAnB,CAAwB,OAAxB;AAAP;AACD,GAFsB,CAAvB;AAGA,MAAI,WAAW,EAAf;;AAEA,4BAAE,OAAF,CAAU,gBAAV,EAA4B,UAAS,eAAT,EAA0B;AACpD,QAAI,SAAS,0BAAE,OAAF,CAAU,eAAV,EAA2B,kBAA3B,EAA+C,EAA/C,CAAb;AACA,QAAI,OAAO,0BAAE,OAAF,CAAU,MAAV,CAAX;AACA,QAAI,KAAK,IAAI,eAAJ,CAAT;;AAEA,QAAI,UAAU;AACZ,UADY;AAEZ,QAFY;AAGZ;AACA,eAAS,IAAI,CAAJ,CAAO,GAAE,MAAO,UAAhB,CAJG;AAKZ,UAAI,0BAAE,KAAF,CAAQ,0BAAE,SAAF,CAAY,IAAI,CAAJ,CAAO,GAAE,MAAO,KAAhB,CAAZ,EAAmC,EAAnC,CAAR,EAAgD,GAAhD;AALQ,KAAd;;AAQA,aAAS,EAAT,IAAe,OAAf;AACA,aAAS,MAAT,IAAmB,OAAnB;AACA,aAAS,IAAT,IAAiB,OAAjB;AACD,GAhBD;;AAkBA,4BAAE,MAAF,CAAS,QAAT,EAAmB,SAAS,IAAI,cAAb,CAAnB;;AAEA,SAAO,QAAP;AACD,CA3BM;;AA6BA,IAAI,4BAAU,QAAQ,GAAR,CAAY,EAAC,kBAAD,EAAZ,CAAd;;AAEP;AACO,IAAI,oCAAc,QAAQ,OAA1B","file":"account.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport env from './env';\n\nexport let get = function({env}) {\n  let awsAccountIdVars = _.filter(_.keys(env._), function(varName) {\n    return /_AWS_ACCOUNT_ID$/.test(varName);\n  });\n  let accounts = {};\n\n  _.forEach(awsAccountIdVars, function(awsAccountIdVar) {\n    let prefix = _.replace(awsAccountIdVar, /_AWS_ACCOUNT_ID$/, '');\n    let NAME = _.toLower(prefix);\n    let ID = env[awsAccountIdVar];\n\n    let account = {\n      NAME,\n      ID,\n      // using env._ because the vars are optional\n      CI_USER: env._[`${prefix}_CI_USER`],\n      NS: _.split(_.defaultTo(env._[`${prefix}_NS`], ''), ',')\n    };\n\n    accounts[ID] = account;\n    accounts[prefix] = account;\n    accounts[NAME] = account;\n  });\n\n  _.assign(accounts, accounts[env.AWS_ACCOUNT_ID]);\n\n  return accounts;\n};\n\nexport let current = exports.get({env});\n\n// backward compat alias\nexport let AWS_ACCOUNT = exports.current;\n\nexport default current;\n"]}